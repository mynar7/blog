{"componentChunkName":"component---src-templates-blog-post-js","path":"/react-use-effect-explained/","webpackCompilationHash":"134709d15ec63a59f43f","result":{"data":{"site":{"siteMetadata":{"title":"Strings and Things","author":"Lee Warrick","siteUrl":"https://leewarrick.com/blog"}},"mdx":{"id":"d0e233ab-f088-55ce-ab0b-6cd70374280d","excerpt":"If the React docs leave you in the dust, or Dan Abramov's  blog  makes you feel like you're reading a scroll handed down from Mt Olympus written in ancient Greek, you're not aloneâ€¦","frontmatter":{"title":"React's useEffect and useRef Explained for Mortals","date":"September 06, 2019"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"React's useEffect and useRef Explained for Mortals\",\n  \"date\": \"2019-09-06T12:00:00-0400\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"590px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/blog/static/fdb92914fc9093dee6a2c20dad8fbd50/c35de/acropolis.jpg\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": [\"noopener\"]\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"66.66666666666666%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0px\",\n      \"left\": \"0px\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Photo of the Acropolis of Athens, Athens, Greece by Cristina Gottardi\",\n    \"title\": \"Photo of the Acropolis of Athens, Athens, Greece by Cristina Gottardi\",\n    \"src\": \"/blog/static/fdb92914fc9093dee6a2c20dad8fbd50/c739e/acropolis.jpg\",\n    \"srcSet\": [\"/blog/static/fdb92914fc9093dee6a2c20dad8fbd50/8ee9c/acropolis.jpg 148w\", \"/blog/static/fdb92914fc9093dee6a2c20dad8fbd50/ebbe7/acropolis.jpg 295w\", \"/blog/static/fdb92914fc9093dee6a2c20dad8fbd50/c739e/acropolis.jpg 590w\", \"/blog/static/fdb92914fc9093dee6a2c20dad8fbd50/5413e/acropolis.jpg 885w\", \"/blog/static/fdb92914fc9093dee6a2c20dad8fbd50/4efde/acropolis.jpg 1180w\", \"/blog/static/fdb92914fc9093dee6a2c20dad8fbd50/c35de/acropolis.jpg 1200w\"],\n    \"sizes\": \"(max-width: 590px) 100vw, 590px\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"If the React docs leave you in the dust, or Dan Abramov\\u2019s \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://overreacted.io/a-complete-guide-to-useeffect/\"\n  }), \"blog\"), \" makes you feel like you\\u2019re reading a scroll handed down from Mt Olympus written in ancient Greek, you\\u2019re not alone.\"), mdx(\"p\", null, \"Sometimes the pantheon of React Gods have a hard time translating their wisdom into language the rest of us can understand. It usually goes like this: You hit a snag with React, google your issue, and read a blog or Stack Overflow post with some advice that makes you feel more lost than when you started.\"), mdx(\"p\", null, \"I\\u2019ve certainly fallen victim to this many, many times. Particularly with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \". Before we dive into this particular hook, let me say that I love writing React with hooks and wouldn\\u2019t want to go back to classes. That said, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \" is a big pain point.\"), mdx(\"h2\", null, \"What is an \\u201Ceffect\\u201D anyway?\"), mdx(\"p\", null, \"To really wrap your head around \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \", let\\u2019s back up a little bit and talk about programming and JavaScript.\"), mdx(\"p\", null, \"The effects that \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \" is named for are what we affectionately refer to as \\u201Cside effects\\u201D.\"), mdx(\"p\", null, \"So what is a side effect? It\\u2019s a bit of code that reaches out and \\u2026does something else. It\\u2019s an abstract concept, so let\\u2019s talk in examples.\"), mdx(\"p\", null, \"Here\\u2019s a function with NO side effects:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"function add(a, b) {\\n    return a + b\\n}\\n\")), mdx(\"p\", null, \"The function \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"add\"), \" does nothing except take an input and return an output. It doesn\\u2019t reach outside itself to mess with anything else!\"), mdx(\"p\", null, \"Let\\u2019s introduce a side effect.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\",\n    \"metastring\": \"js-live autorun linkId=ex1 no-edit\",\n    \"js-live\": true,\n    \"autorun\": true,\n    \"linkId\": \"ex1\",\n    \"no-edit\": true\n  }), \"const resultDiv = document.getElementById('add-example')\\nfunction add(a, b) {\\n    const result = a + b\\n    resultDiv.textContent = `The Result is ${result}`\\n    return a + b\\n}\\nadd(3, 4)\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-html\",\n    \"metastring\": \"html-live linkId=ex1 no-edit\",\n    \"html-live\": true,\n    \"linkId\": \"ex1\",\n    \"no-edit\": true\n  }), \"<div id=\\\"add-example\\\"></div>\\n\")), mdx(\"p\", null, \"Now our function reaches outside of itself to update the DOM (short for \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.youtube.com/watch?v=H63dVFDuJDM\"\n  }), \"Document Object Model\"), \") and show the result. This additional behavior is a side effect.\"), mdx(\"h2\", null, \"Side Effects in React\"), mdx(\"p\", null, \"So what about React? It\\u2019s a library that pretty much only updates the DOM. A view library, if you will. So what would you call a side effect in React?\"), mdx(\"p\", null, \"Anything outside of updating the page. If you\\u2019re not using React to update state or render HTML, that\\u2019s a side effect. It\\u2019s any non-React thing.\"), mdx(\"p\", null, \"This means anytime you call an API, use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setInterval\"), \"/\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setTimeout\"), \", add a keyboard listener, or really anytime you mess with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"window\"), \" object you\\u2019re introducing side effects.\"), mdx(\"p\", null, \"Hooks are amazing and let you write really readable, reusable code\\u2026 except when you\\u2019re dealing with side effects. And that\\u2019s unfortunate, because when you think about it, most of the fun, interesting stuff we do as web developers revolves around side effects.\"), mdx(\"p\", null, \"Let\\u2019s take a step back from hooks for a minute and look at how we would handle side effects in class-based components.\"), mdx(\"h3\", null, \"Class-based Components and Side Effects\"), mdx(\"p\", null, \"In class-based components, we would use lifecycle methods to perform side effects. For example, on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"componentDidMount\"), \" we would call APIs to get data for render.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\u201CWhy not call the API in the constructor function?\\u201D\"), \", you might ask. Well, because React says stuff we use for render goes in \\u201Cstate\\u201D and we can\\u2019t mess with state until our component is loaded onto the page. If we try to update state before the component is loaded, we get errors.\"), mdx(\"p\", null, \"Here\\u2019s a typical class-based component hitting the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://pokeapi.co/\"\n  }), \"PokeAPI\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live no-edit\",\n    \"react-live\": true,\n    \"no-edit\": true\n  }), \"class Pokemon extends React.Component {\\n    constructor() {\\n        super()\\n        this.state = null\\n    }\\n    componentDidMount() {\\n        fetch('https://pokeapi.co/api/v2/pokemon/gengar/')\\n        .then(res => res.json())\\n        .then(res => {\\n            this.setState(res)\\n        })\\n    }\\n    render() {\\n        const pokemon = this.state\\n        const style = {textTransform: 'capitalize'}\\n        return (\\n            <div>\\n            { pokemon\\n                ? <>\\n                    <img src={pokemon.sprites.front_default}\\n                        alt={'Image of ' + pokemon.name}/>\\n                    <p style={style}>Name: {pokemon.name}</p>\\n                    <p style={style}>\\n                        Type: {pokemon.types.map(x => x.type.name).join(', ')}\\n                    </p>\\n                </>\\n                : 'Loading...'\\n            }\\n            </div>\\n        )\\n    }\\n}\\n\")), mdx(\"p\", null, \"This works well, except when it doesn\\u2019t. What happens when we want to hit the API again to grab a different pokemon? What if this component is attached to a certain route in our app and the route changes, but the component doesn\\u2019t unmount/remount. What if the user goes to a different page and the component unmounts before the API call finishes?\"), mdx(\"p\", null, \"The answer is to add more lifecycle methods like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"componentDidUpdate\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"componentWillUnmount\"), \" to perform more API calls and prevent weird unmounting errors. So we add those lifecycle methods in to handle all our edge cases. And by the time we\\u2019re done, we realize most of our component consists of lifecycle code.\"), mdx(\"h2\", null, \"Then Came React Hooks\"), mdx(\"p\", null, \"The React team realized that the class API is a little unwieldy and hard to reason about. People were making \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://levelup.gitconnected.com/componentdidmakesense-react-lifecycle-explanation-393dcb19e459\"\n  }), \"lifecycle flowcharts\"), \" trying to understand the inner workings of React \\u2026it was a mess.\"), mdx(\"p\", null, \"So at ReactConf in October of 2018, after Sophie Alpert outlined just how bad classes are to use, Dan Abramov got on stage and introduced hooks (You can watch the video \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://youtu.be/dpw9EHDh2bM?t=643\"\n  }), \"here\"), \").\"), mdx(\"p\", null, \"Hooks introduced statefulness in functional components, as well as a new way to handle side effects. Hooks made React code more reusable with less code\\u2014a huge win!\"), mdx(\"p\", null, \"Except for one small quirk. Each render, the whole component/function is re-run.\"), mdx(\"p\", null, \"Let\\u2019s look at an example of a hooks-based component:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live no-edit\",\n    \"react-live\": true,\n    \"no-edit\": true\n  }), \"function RerenderExample() {\\n    const [bool, setBool] = React.useState(false)\\n    const randomNum = Math.random()\\n    return (\\n        <div>\\n            <p>This number will be different each time you click the button:</p>\\n            <p>{randomNum}</p>\\n            <button onClick={() => setBool(!bool)}>Trigger a render</button>\\n        </div>\\n    )\\n}\\n\")), mdx(\"p\", null, \"We\\u2019re not even using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"bool\"), \" in our rendered JSX, yet the whole function runs everytime the state changes. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Every render, everything inside the component re-runs: function definitions, variable creation/assignment, etc.\")), mdx(\"p\", null, \"If you\\u2019re thinking \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\u201Cwhat if I have to do something computationally expensive inside a component? This can\\u2019t be performant\\u2026\\u201D\"), \", that\\u2019s an astute observation. An expensive operation in a functional component \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"wouldn\\u2019t\"), \" be performant. In fact \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useCallback\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useMemo\"), \" exist as escape hatches for this very problem. Kent C Dodds has a challenging read on those \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kentcdodds.com/blog/usememo-and-usecallback\"\n  }), \"here\"), \", but to summarize, according to Kent you shouldn\\u2019t worry about the re-renders until you see performance impacts.\"), mdx(\"p\", null, \"(\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note\"), \": If you\\u2019re unfamiliar with hooks, bookmark that article and come back to it when you\\u2019re ready. Don\\u2019t worry about memoization until you have to.)\"), mdx(\"p\", null, \"Hooks like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useState\"), \" employ some magic under-the-hood to avoid the re-render problem. That\\u2019s great, and it seems simple enough using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useState\"), \", but what about when you need to do things outside of setting state?\"), mdx(\"p\", null, \"Enter \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \". Gone are those pesky lifecycle methods, hooray! However this hook comes with its own weirdness. First let\\u2019s check out the syntax:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"//accepts two arguments: a function, and dependency array\\nuseEffect(() => {\\n    // do stuff\\n    return () => {} //function to undo our stuff from above when component unmounts\\n}, []) //dependency array of things to watch for changes on\\n\")), mdx(\"p\", null, \"So you pass \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \" a callback function to run that contains your side effects, and then an array of things to watch. If the watched things change, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \" will re-run our callback function. If you need to clean up your side effect on unmount, return a function that contains that code.\"), mdx(\"p\", null, \"Let\\u2019s look at our pokemon example with hooks and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live no-edit\",\n    \"react-live\": true,\n    \"no-edit\": true\n  }), \"function Pokemon() {\\n    const [pokemon, setPokemon] = React.useState(null)\\n    React.useEffect(() => {\\n        fetch('https://pokeapi.co/api/v2/pokemon/gengar/')\\n        .then(res => res.json())\\n        .then(res => {\\n            setPokemon(res)\\n        })\\n    }, []) // empty array means nothing to watch, so run once and no more\\n    const style = {textTransform: 'capitalize'}\\n    return (\\n        <div>\\n        { pokemon\\n            ? <>\\n                <img src={pokemon.sprites.front_default}\\n                    alt={'Image of ' + pokemon.name}/>\\n                <p style={style}>Name: {pokemon.name}</p>\\n                <p style={style}>\\n                    Type: {pokemon.types.map(x => x.type.name).join(', ')}\\n                </p>\\n            </>\\n            : 'Loading...'\\n        }\\n        </div>\\n    )\\n}\\n\")), mdx(\"p\", null, \"If you\\u2019re staring at that empty dependency array, you\\u2019ve noticed the first \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \" quirk. By passing an empty array, we\\u2019re saying \\u201Conly ever do this once\\u201D. The React pantheon tells us that on rare occasions that\\u2019s ok, but most of the time you want something in there. The reason is that usually you want to synchronize with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"something\"), \" in your code, not just perform the effect once. For example, what if our pokemon component depended on a route parameter or props, anything that said, \\u201Cgo get a new pokemon\\u201D without mounting/unmounting?\"), mdx(\"p\", null, \"Let\\u2019s say our component depended on a prop \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pokemonToGet\"), \" that was an argument telling it which pokemon to get from the API. Let\\u2019s also add a tiny form for testing purposes:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live use-render no-edit\",\n    \"react-live\": true,\n    \"use-render\": true,\n    \"no-edit\": true\n  }), \"function Pokemon({pokemonToGet}) {\\n    const [pokemon, setPokemon] = React.useState(null)\\n    React.useEffect(() => {\\n        fetch(`https://pokeapi.co/api/v2/pokemon/${pokemonToGet}/`)\\n        .then(res => res.json())\\n        .then(res => {\\n            setPokemon(res)\\n        })\\n    }, [pokemonToGet]) // get a new pokemon with the pokemonToGet prop changes\\n    const style = {textTransform: 'capitalize'}\\n    return (\\n        <div>\\n        { pokemon\\n            ? <>\\n                <img src={pokemon.sprites.front_default}\\n                    alt={'Image of ' + pokemon.name}/>\\n                <p style={style}>Name: {pokemon.name}</p>\\n                <p style={style}>\\n                    Type: {pokemon.types.map(x => x.type.name).join(', ')}\\n                </p>\\n            </>\\n            : 'Loading...'\\n        }\\n        </div>\\n    )\\n}\\nfunction PokemonForm() {\\n    const [inputValue, setInputValue] = React.useState(\\\"rowlet\\\")\\n    const [pokemonToGet, setPokemonToGet] = React.useState(\\\"gengar\\\")\\n    function getPokemon() {\\n        setPokemonToGet(inputValue.trim().toLowerCase())\\n        setInputValue(\\\"\\\")\\n    }\\n    return (\\n        <div>\\n            <input onChange={(e) => setInputValue(e.target.value)}\\n                value={inputValue} type=\\\"text\\\"/>\\n            <button onClick={getPokemon}>\\n                Get Pokemon\\n            </button>\\n            <Pokemon pokemonToGet={pokemonToGet} />\\n        </div>\\n    )\\n}\\nrender(<PokemonForm />)\\n\")), mdx(\"p\", null, \"Great, now our component fetches a new pokemon based on our prop changes. With classes we would\\u2019ve had to play with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"componentDidUpdate\"), \" and such to achieve a similar effect.\"), mdx(\"p\", null, \"Ryan Florence has a great \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/ryanflorence/status/1125041041063665666?lang=en\"\n  }), \"tweet\"), \" to summarize \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \"\\u2019s usage:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"The question is not \\u201Cwhen does this effect run\\u201D the question is \\u201Cwith which state does this effect synchronize with\\u201D\"), mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"useEffect(fn) // all state\"), mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"useEffect(fn, []) // no state\"), mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"useEffect(fn, \", \"[these, states]\", \")\")), mdx(\"p\", null, \"That \\u201Call state\\u201D case he mentions where you pass in nothing for dependencies is a weird one. I\\u2019ve personally never found a use for it. We know that the whole component runs with each render, so I\\u2019m wondering if there\\u2019s some weird edge case that requires you to use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect(fn)\"), \" without any dependency array. In any case, most of the time you\\u2019re going to be working with this: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect(fn, [these, states])\"), \".\"), mdx(\"h2\", null, \"UseEffect and Previous State: Where things fall apart\"), mdx(\"p\", null, \"The mental model so far for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \" seems straight-forward enough: synchronize it with certain state changes of your choosing. The problem is when you need to reference that state in an effect, not just know if it changed.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"You don\\u2019t get access to current state inside of \", mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"useEffect\"), \".\")), mdx(\"p\", null, \"We didn\\u2019t see this in our API call example because we\\u2019re simply overwriting the previous state.\"), mdx(\"p\", null, \"Let\\u2019s look at a simple example:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live\",\n    \"react-live\": true\n  }), \"function Timer() {\\n    const [count, setCount] = React.useState(0)\\n\\n    React.useEffect(() => {\\n        const intervalId = setInterval(() => {\\n            setCount(count + 1)\\n        }, 1000)\\n        return () => clearInterval(intervalId)\\n    }, [])\\n\\n    return (\\n        <div>The count is: {count}</div>\\n    )\\n}\\n\")), mdx(\"p\", null, \"Seems like we did all the right things (even cleaning up our side effect on unmount) but our counter isn\\u2019t incrementing. Is it a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"this\"), \" issue? Do we not have access to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"window\"), \" object that \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setInterval\"), \" belongs to?\"), mdx(\"p\", null, \"No and no. If you added a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"console.log\"), \" into that interval, you\\u2019d see it tick every second.\"), mdx(\"p\", null, \"I\\u2019ll prove it to you:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live\",\n    \"react-live\": true\n  }), \"function Timer() {\\n    const [count, setCount] = React.useState(0)\\n    const [randomNum, setRandomNum] = React.useState(0)\\n\\n    React.useEffect(() => {\\n        const intervalId = setInterval(() => {\\n            setCount(count + 1)\\n            setRandomNum(Math.random())\\n        }, 1000)\\n        return () => clearInterval(intervalId)\\n    }, [])\\n\\n    return (\\n        <div>\\n            <p>The count is: {count}</p>\\n            <p>RandomNum is {randomNum}</p>\\n        </div>\\n    )\\n}\\n\")), mdx(\"p\", null, \"Notice we get a new random number every second. Our interval code is fine.\"), mdx(\"p\", null, \"We\\u2019re able to set new state, but are unable to access current state.\"), mdx(\"p\", null, \"This is a \\u201D\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"stale closure\"), \"\\u201D. I won\\u2019t get into closures, but just know that because of the implementation of React/hooks, the count variable is always going to be 0 in our interval function. It\\u2019s an old reference.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Update 9/7/19\"), \": It turns out, there\\u2019s a solution for simple examples like above, as pointed out by John Tucker (thanks John!). Much like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setState\"), \" in class-based components, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useState\"), \" can also accept a callback function that receives the previous state as an argument. The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://reactjs.org/docs/hooks-reference.html#functional-updates\"\n  }), \"React Docs\"), \" also make note of this.\"), mdx(\"p\", null, \"Here\\u2019s an example of the quick fix:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live\",\n    \"react-live\": true\n  }), \"function Timer() {\\n    const [count, setCount] = React.useState(0)\\n\\n    React.useEffect(() => {\\n        const intervalId = setInterval(() => {\\n            //let's pass a function instead\\n            //the argument is the current state\\n            setCount(count => count + 1)\\n        }, 1000)\\n        return () => clearInterval(intervalId)\\n    }, [])\\n\\n    return (\\n        <div>The count is: {count}</div>\\n    )\\n}\\n\")), mdx(\"p\", null, \"This still doesn\\u2019t solve all of our problems, though. If you need to access to the latest state inside \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \", but \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"not\"), \" update it, you would have to start wrapping your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect\"), \" code in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setState\"), \" callbacks, and then returning the unchanged state at the end. This could quickly become an absolute mess, particularly if you\\u2019re working with multiple state values.\"), mdx(\"p\", null, \"Another possible solution could be to work only with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useReducer\"), \", as that receives previous state, but filling your reducer with side effects also seems very messy, and I wouldn\\u2019t suggest anyone stop using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useState\"), \" entirely.\"), mdx(\"p\", null, \"In any case, I\\u2019ve fallen into the stale closure trap many, many times when writing hooks. I didn\\u2019t even know it had a name until I read it in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.google.com/presentation/d/1PUvpXMBEDS45rd0wHu6tF3j_8wmGC6cOLtOw2hzU-mw/edit#slide=id.p\"\n  }), \"this talk\"), \" by Rich Harris, the man behind \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://svelte.dev/\"\n  }), \"Svelte\"), \".\"), mdx(\"p\", null, \"Apparently, I\\u2019m not the only one tripping over them in hooks, either:\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"590px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/blog/static/5a5dbcc6667a5da9eeabc5cbe90a1427/ed46b/staleclosures.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": [\"noopener\"]\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"53.02013422818792%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0px\",\n      \"left\": \"0px\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Photo of Tweet by Kent Dodds asking about hooks pitfalls and a snarky response of \\\"stale closures\\\"\",\n    \"title\": \"Photo of Tweet by Kent Dodds asking about hooks pitfalls and a snarky response of \\\"stale closures\\\"\",\n    \"src\": \"/blog/static/5a5dbcc6667a5da9eeabc5cbe90a1427/b9e4f/staleclosures.png\",\n    \"srcSet\": [\"/blog/static/5a5dbcc6667a5da9eeabc5cbe90a1427/cf440/staleclosures.png 148w\", \"/blog/static/5a5dbcc6667a5da9eeabc5cbe90a1427/d2d38/staleclosures.png 295w\", \"/blog/static/5a5dbcc6667a5da9eeabc5cbe90a1427/b9e4f/staleclosures.png 590w\", \"/blog/static/5a5dbcc6667a5da9eeabc5cbe90a1427/f9b6a/staleclosures.png 885w\", \"/blog/static/5a5dbcc6667a5da9eeabc5cbe90a1427/2d849/staleclosures.png 1180w\", \"/blog/static/5a5dbcc6667a5da9eeabc5cbe90a1427/ed46b/staleclosures.png 1192w\"],\n    \"sizes\": \"(max-width: 590px) 100vw, 590px\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"React even mentions it in their \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://reactjs.org/docs/hooks-faq.html#why-am-i-seeing-stale-props-or-state-inside-my-function\"\n  }), \"docs\"), \":\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u201CAny function inside a component, including event handlers and effects, \\u201Csees\\u201D the props and state from the render it was created in.\\u201D\")), mdx(\"p\", null, \"I read this prior and it made little sense to me before really digging into the issue. I imagine it could be a bit of a black eye for React, so perhaps they don\\u2019t wish to call it out too loudly.\"), mdx(\"p\", null, \"Dan Abramov, however, describes the problem better in his \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://overreacted.io/a-complete-guide-to-useeffect/\"\n  }), \"blog\"), \" and even provides a solution:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u201CEffects always \\u201Csee\\u201D props and state from the render they were defined in. That helps prevent bugs but in some cases can be annoying. For those cases, you can explicitly maintain some value in a mutable ref.\\u201D\")), mdx(\"p\", null, \"This was helpful, because it provided a solution in the form of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useRef\"), \" (Thanks Dan!), but it left me in the dark as to how it would help avoid the issue (mostly because I didn\\u2019t understand \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useRef\"), \").\"), mdx(\"h2\", null, \"What is a \\u201Cref\\u201D, and how do you use one?\"), mdx(\"p\", null, \"So traditionally, refs were meant to let you directly access an html element. For instance, let\\u2019s say you needed to focus an input field. You have to bail out of React and use regular JavaScript to call \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".focus()\"), \". Hooks actually make this fairly simple:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live\",\n    \"react-live\": true\n  }), \"function InputField() {\\n    const inputRef = React.useRef()\\n    return (\\n        <div>\\n            <input type=\\\"text\\\" ref={inputRef} />\\n            <button onClick={() => inputRef.current.focus()}>\\n                Click to Focus the input\\n            </button>\\n        </div>\\n    )\\n}\\n\")), mdx(\"p\", null, \"Great! Refs are an easy escape hatch to access native DOM APIs when we need to.\"), mdx(\"p\", null, \"\\u2026but how does that help us fix our stale closure counter example?\"), mdx(\"h2\", null, \"Using Refs to avoid Stale Closures\"), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://reactjs.org/docs/hooks-faq.html#is-there-something-like-instance-variables\"\n  }), \"React docs\"), \" compare refs to \\u201Cinstance variables\\u201D. I didn\\u2019t know what that meant (thanks \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://en.wikipedia.org/wiki/Instance_variable\"\n  }), \"Wikipedia\"), \"), so I didn\\u2019t find that helpful.\"), mdx(\"p\", null, \"I managed to wrap my head around refs by thinking about them this way:\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Refs exist outside of the re-render cycle.\")), mdx(\"p\", null, \"Think of refs as a variable you\\u2019re setting to the side. When your component re-runs it happily skips over that ref until you call it somewhere with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".current\"), \".\"), mdx(\"p\", null, \"Let\\u2019s see the fix for our timer example:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live\",\n    \"react-live\": true\n  }), \"function Timer() {\\n    const [count, setCount] = React.useState(0)\\n    const countRef = React.useRef(0)\\n\\n    React.useEffect(() => {\\n        const intervalId = setInterval(() => {\\n            countRef.current = countRef.current + 1\\n            setCount(countRef.current)\\n        }, 1000)\\n        return () => clearInterval(intervalId)\\n    }, [])\\n\\n    return (\\n        <div>The count is: {count}</div>\\n    )\\n}\\n\")), mdx(\"p\", null, \"If we wanted to stop the timer at say, 10, we could easily do so using the ref:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live\",\n    \"react-live\": true\n  }), \"function Timer() {\\n    const [count, setCount] = React.useState(0)\\n    const countRef = React.useRef(0)\\n\\n    React.useEffect(() => {\\n        const intervalId = setInterval(() => {\\n            if (countRef.current === 10)\\n                return clearInterval(intervalId)\\n            countRef.current = countRef.current + 1\\n            setCount(countRef.current)\\n        }, 1000)\\n        return () => clearInterval(intervalId)\\n    }, [])\\n\\n    return (\\n        <div>The count is: {count}</div>\\n    )\\n}\\n\")), mdx(\"p\", null, \"Here\\u2019s the alternative using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setState\"), \" callback approach, for sake of comparison:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live\",\n    \"react-live\": true\n  }), \"function Timer() {\\n    const [count, setCount] = React.useState(0)\\n\\n    React.useEffect(() => {\\n        const intervalId = setInterval(() => {\\n            setCount(count => {\\n                if (count === 10) {\\n                    clearInterval(intervalId)\\n                    return count\\n                }\\n                else return count + 1\\n            })\\n        }, 1000)\\n        return () => clearInterval(intervalId)\\n    }, [])\\n\\n    return (\\n        <div>The count is: {count}</div>\\n    )\\n}\\n\")), mdx(\"p\", null, \"I could see this quickly approaching callback hell, so I would caution against using the callback approach if you\\u2019re doing something more complex.\"), mdx(\"h2\", null, \"State Versus Refs\"), mdx(\"p\", null, \"Is it possible to ditch state entirely and just use refs?\"), mdx(\"p\", null, \"You might be inclined to think you could use refs instead of state for your component and just sidestep all this weird behavior.\"), mdx(\"p\", null, \"You can\\u2019t. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Refs aren\\u2019t reactive.\"), \" When you change a ref, it doesn\\u2019t cause a re-render. (Remember, they exist outside of the re-render cycle).\"), mdx(\"p\", null, \"This won\\u2019t work:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live\",\n    \"react-live\": true\n  }), \"function Timer() {\\n    const count = React.useRef(0)\\n\\n    React.useEffect(() => {\\n        const intervalId = setInterval(() => {\\n            count.current = count.current + 1\\n            //console.log('Ref example count: ' + count.current)\\n        }, 1000)\\n        return () => clearInterval(intervalId)\\n    }, [])\\n\\n    return (\\n        <div>The count is: {count.current}</div>\\n    )\\n}\\n\")), mdx(\"p\", null, \"That component is actually counting upwards internally, but it\\u2019s not causing the HTML to update. You need \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useState\"), \" for that. (Go ahead and uncomment the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"console.log\"), \" if you don\\u2019t believe me)\"), mdx(\"p\", null, \"Here\\u2019s an example to demonstrate refs vs state:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live use-render\",\n    \"react-live\": true,\n    \"use-render\": true\n  }), \"function Counter() {\\n  const [count, setCount] = React.useState(0)\\n  const countRef = React.useRef(0)\\n\\n  return (\\n    <div>\\n      <p>State Count: {count}</p>\\n      <button onClick={() => setCount(count + 1)}>\\n        Increment State Count\\n      </button>\\n      <p>Ref Count: {countRef.current}</p>\\n      <button onClick={() => countRef.current = countRef.current + 1}>\\n        Increment Ref Count\\n      </button>\\n    </div>\\n  )\\n}\\n\\nrender(<Counter/>)\\n\")), mdx(\"p\", null, \"You won\\u2019t see the ref count change until you trigger a re-render by setting state.\"), mdx(\"h2\", null, \"Parting Thoughts\"), mdx(\"p\", null, \"I love hooks and functional components in React, but the quirks I\\u2019ve outlined have given me pause. I don\\u2019t like being required to know so much about the inner-workings of React to use it. I think it presents a roadblock for those learning React, and I hope in the future the React team comes up with some better ways to handle these quirks.\"));\n}\nMDXContent.isMDXComponent = true;"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/react-use-effect-explained/","previous":{"id":"4e64b65d-35e3-5226-916a-f59e1ebea41a","fields":{"slug":"/staying-sane-with-css/"},"frontmatter":{"title":"Staying Sane while Organizing CSS"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Staying Sane while Organizing CSS\",\n  \"date\": \"2019-09-01T13:00:00-0400\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"590px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/blog/static/2fd06797aa9f09bb57ed8458570b82f3/971c4/mugcss.jpg\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": [\"noopener\"]\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"100%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0px\",\n      \"left\": \"0px\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Mug with 'CSS is Awesome' written on it, but 'Awesome' overflows the border of the text\",\n    \"title\": \"Mug with 'CSS is Awesome' written on it, but 'Awesome' overflows the border of the text\",\n    \"src\": \"/blog/static/2fd06797aa9f09bb57ed8458570b82f3/c739e/mugcss.jpg\",\n    \"srcSet\": [\"/blog/static/2fd06797aa9f09bb57ed8458570b82f3/8ee9c/mugcss.jpg 148w\", \"/blog/static/2fd06797aa9f09bb57ed8458570b82f3/ebbe7/mugcss.jpg 295w\", \"/blog/static/2fd06797aa9f09bb57ed8458570b82f3/c739e/mugcss.jpg 590w\", \"/blog/static/2fd06797aa9f09bb57ed8458570b82f3/5413e/mugcss.jpg 885w\", \"/blog/static/2fd06797aa9f09bb57ed8458570b82f3/971c4/mugcss.jpg 1000w\"],\n    \"sizes\": \"(max-width: 590px) 100vw, 590px\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"In my time as a front-end developer, I\\u2019ve seen and heard a lot of gripes about CSS.\"), mdx(\"p\", null, \"I often see people reach for a CSS framework like Bootstrap, Materialize, Bulma, Tailwind, etc. to avoid writing CSS. While CSS frameworks can be great accelerators, they often require solid CSS skills to wield them effectively. That is to say, if you\\u2019re not very good at CSS, you\\u2019re probably not going to be that great using a CSS framework either.\"), mdx(\"p\", null, \"Framework or not, when hitting a snag people tend to throw more and more lines of CSS at the problem until they get a working solution. In essence, they\\u2019re following the \\u201Ccan\\u2019t tie a knot? Tie a lot!\\u201D method of development.\"), mdx(\"p\", null, \"Unfortunately a massive, improper knot is unreliable and weakens the rope.\"), mdx(\"p\", null, \"So don\\u2019t be the \\u201Csee what sticks\\u201D developer. I\\u2019m going to show you how you can add a little organization to your stylesheets that will get you up and running quickly without pulling your hair out.\"), mdx(\"h2\", null, \"Preparing for Success: Reset vs Normalize\"), mdx(\"p\", null, \"HTML elements come with their own default styling. Unfortunately, much of it is flat-out ugly (Looking at you, form input elements).\"), mdx(\"p\", null, \"To make things worse, browsers \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"still\"), \" have not reached 100% parity on that default styling. This means certain elements appear differently on different browsers.\"), mdx(\"p\", null, \"You may even end up overriding that default styling over and over again in your stylesheet to achieve the look or positioning you want. Don\\u2019t fall into this trap. Address the default styles once.\"), mdx(\"p\", null, \"That said, there are two powerful, pre-built solutions for taming default styles: Reset and Normalize.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note\"), \": Don\\u2019t forget to add these \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"before\"), \" all other styles\\u2014remember the cascade!\"), mdx(\"h3\", null, \"CSS Reset\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://cssreset.com/scripts/eric-meyer-reset-css/\"\n  }), \"CSS Reset\"), \" is essentially the nuclear option. It wipes out all the styles from all of the elements, more or less making them differ in name only. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<h1>\"), \"\\u2019s look like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<p>\"), \" tags, for example.\"), mdx(\"p\", null, \"This is a valid solution if you need to start from scratch, but you typically don\\u2019t need to obliterate the default styles completely. If you do, you\\u2019re going to have to go back in and make that \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<h1>\"), \" large and bold again with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"more\"), \" CSS.\"), mdx(\"h3\", null, \"Normalize CSS\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://necolas.github.io/normalize.css/\"\n  }), \"Normalize CSS\"), \" is the more elegant solution than a reset. Its goal is to even out the kinks between browsers and address the most common issues with default styles, while leaving the rest intact.\"), mdx(\"p\", null, \"Most CSS frameworks have a normalize built into them already, so you won\\u2019t need to add this in if you\\u2019re using Bootstrap, Materialize, etc.\"), mdx(\"h3\", null, \"The Quick and Easy Option\"), mdx(\"p\", null, \"There\\u2019s a third option here worth mentioning. If you\\u2019re trying to get things done quickly and not using a framework, you can eliminate most of the funk with something like this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-css\"\n  }), \"* {\\n    margin: 0;\\n    padding: 0;\\n    /* box-sizing: border-box */\\n    /* border: 1px solid black */\\n}\\n\")), mdx(\"p\", null, \"This ends up stripping out all the micro-adjustments you typically have to come in and do later if you roll with the default padding and margin on elements. (The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"*\"), \" is a wildcard selector that selects all elements)\"), mdx(\"p\", null, \"You can optionally toss in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"box-sizing\"), \" bit to make sure that your widths/heights are not additive. This means if you say an element is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"500px\"), \", it will be exactly that regardless of padding, margin, or border that you add in later. I don\\u2019t typically find myself reaching for this, but it can help when you\\u2019re doing pixel-perfect layouts.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note\"), \": The last bit is a little \\uD83D\\uDD25 \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"hot tip\"), \" \\uD83D\\uDD25 for debugging CSS layouts. If you\\u2019re wondering how big or what shape an element is, adding a border can quickly show you how something is being rendered. This adds a border to all elements, showing you how everything is laid out on the page.\"), mdx(\"h2\", null, \"Writing Good Markup and \\u2018Going with the Flow\\u2019\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.csszengarden.com/\"\n  }), \"CSS Zen Garden\"), \" showed us the awesome power of CSS to style HTML regardless of how it is written.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"What\\u2019s that quote about power and responsibility\\u2026?\"), \" \\uD83E\\uDD14\\uD83D\\uDD77\"), mdx(\"p\", null, \"HTML has a certain \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Normal_Flow\"\n  }), \"flow\"), \" to it. It\\u2019s read and rendered top-to-bottom, certain elements are \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"block\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"inline\"), \", etc. The greater your knowledge of this default behavior, the better you can use it to your advantage, and the less CSS you\\u2019ll have to write to change it.\"), mdx(\"p\", null, \"Yes, CSS can do amazing things to change the default behavior of markup. However, if you write your HTML with your end goal in mind, you\\u2019ll end up weaponizing CSS less often to make your markup behave appropriately.\"), mdx(\"h2\", null, \"Mastering Layouts with Flexbox and Utility Classes\"), mdx(\"p\", null, \"Layouts and positioning of elements is probably the biggest source of strife when learning CSS. You want an element to be in a particular spot, so you write ten lines of CSS that \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"almost\"), \" positions it perfectly. Then you write ten more lines of CSS, but now it\\u2019s vertically off-center, etc.\"), mdx(\"p\", null, \"There\\u2019s a few tools and tricks that can dramatically reduce the amount of time you spend attempting to place elements where you want them to go.\"), mdx(\"h3\", null, \"Floats\"), mdx(\"p\", null, \"Before we talk about flexbox, let\\u2019s talk briefly about floats. If you\\u2019re using floats for layouts, \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"please stop\"), \". Flexbox is \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://caniuse.com/#feat=flexbox\"\n  }), \"highly compatible\"), \" with older browsers, and it\\u2019s way easier to use.\"), mdx(\"p\", null, \"Floats are great for wrapping text around an element, but are awful for layouts. They break the flow of HTML and require a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.w3schools.com/howto/howto_css_clearfix.asp\"\n  }), \"clearfix\"), \" hack to restore that flow for the rest of the elements that come after.\"), mdx(\"p\", null, \"Here\\u2019s a quick example:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-html\",\n    \"metastring\": \"html-live\",\n    \"html-live\": true\n  }), \"<div id=\\\"float-example\\\">\\n    <img src=\\\"https://picsum.photos/200\\\" id=\\\"floatImage\\\"/>\\n    <!-- Let's say we want this blob of text to wrap around our example image -->\\n    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris ultricies sem id ante ullamcorper, a commodo eros molestie. Phasellus leo justo, malesuada scelerisque ullamcorper et, finibus ut metus. Integer egestas tellus leo, et consectetur tortor bibendum at. Sed non imperdiet risus. Sed at metus mauris. Donec ullamcorper, nunc sit amet ullamcorper mattis, diam sapien viverra nisi, sit amet pretium ligula mi in est. Nulla finibus imperdiet fringilla. Proin fringilla augue et turpis placerat, sit amet commodo enim dictum. Vivamus viverra mollis augue, in fermentum odio placerat eu. Aenean porta tellus quis urna tristique sagittis.\\n</div>\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-css\",\n    \"metastring\": \"css-live\",\n    \"css-live\": true\n  }), \"#floatImage {\\n    /* 'float' makes the text wrap around the image, try 'right' */\\n    float: left;\\n    /* the rest of this is to better illustrate the wrapping effect */\\n    shape-outside: circle();\\n    border-radius: 100px;\\n    margin: 5px;\\n}\\n\\n#float-example::after {\\n    /* Another gripe about floats is having to use a clearfix! */\\n    content: \\\"\\\";\\n    display: table;\\n    clear: both;\\n}\\n\")), mdx(\"p\", null, \"If you erase some of the lorem text, and remove that clearfix hack, you\\u2019ll see how floats destroy a page\\u2019s flow.\"), mdx(\"p\", null, \"Floats are a good tool if you use them correctly. However for layouts, you probably don\\u2019t want to use a float.\"), mdx(\"h3\", null, \"Flexbox\"), mdx(\"p\", null, \"Flexbox is a powerful and simple tool to use for creating layouts and positioning elements. If you\\u2019ve never heard of it, Wes Bos has a great free series on it called \", mdx(\"em\", {\n    parentName: \"p\"\n  }, mdx(\"a\", _extends({\n    parentName: \"em\"\n  }, {\n    \"href\": \"https://www.youtube.com/watch?v=Vj7NZ6FiQvo&list=PLu8EoSxDXHP7xj_y6NIAhy0wuCd4uVdid\"\n  }), \"What the Flexbox?\")), \". If you\\u2019re already familiar with flexbox, there\\u2019s a great \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://flexbox.malven.co/\"\n  }), \"visual cheat sheet\"), \" you can use as well.\"), mdx(\"p\", null, \"Conceptually, flexbox is all about creating containers. So you create a flex container with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"display: flex\"), \" and then every direct child element will be aligned a certain way based on that parent container element.\"), mdx(\"p\", null, \"It\\u2019s also a one-dimensional system of laying things out. Each container runs in one direction, either horizontally with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"flex-direction: row\"), \" (the default) or vertically with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"flex-direction: column\"), \". Children within can then be centered/aligned very easily from there.\"), mdx(\"h4\", null, \"Why not Grid?\"), mdx(\"p\", null, \"You can absolutely use Grid! CSS Grid is very similar to flexbox, just way more powerful. If Flexbox is a one-dimensional layout system, Grid is two-dimensional. You can pretty much set a CSS grid container to do anything your heart desires. (If you want a great free CSS Grid course\\u2026 yup, \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.youtube.com/watch?v=T-slCsOrLcc&list=PLu8EoSxDXHP5CIFvt9-ze3IngcdAc2xKG\"\n  }), \"Wes Bos\"), \" has you covered there as well.)\"), mdx(\"p\", null, \"Why use flexbox then? Honestly, I like it because it\\u2019s incredibly simple and straightforward. It does one thing and does it very well. Plus you can absolutely nest flex containers and compose them into whatever you need.\"), mdx(\"h2\", null, \"Components vs Utility classes\"), mdx(\"p\", null, \"So when it comes to organization of CSS, there\\u2019s two camps: components, and utility classes.\"), mdx(\"h3\", null, \"Components\"), mdx(\"p\", null, \"Components could be thought of like how bootstrap organizes their building blocks. A \\u201Cjumbotron\\u201D or \\u201Cnavbar\\u201D, etc. might be represented by one class applied to an element, or possibly with a handful of subclasses used on elements within. The approach here is to use fewer class names in your HTML, scope/name them smartly, and generally style larger chunks of markup with a handful of classes.\"), mdx(\"p\", null, \"A popular convention for naming such classes is \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getbem.com/\"\n  }), \"BEM\"), \". BEM stands for \\u201CBlock, Element, Modifier\\u201D, and it\\u2019s essentially a system of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"--\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"__\"), \" inside your class names to increase the reusability and composability of your CSS.\"), mdx(\"p\", null, \"Here\\u2019s a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.youtube.com/watch?v=SLjHSVwXYq4\"\n  }), \"BEM in 5-minutes\"), \" video to get you up to speed.\"), mdx(\"p\", null, \"The catch is that this reduces resuability of your CSS. You can\\u2019t very well apply jumbotron styles to a navbar. BEM and smart naming can only take you so far.\"), mdx(\"h3\", null, \"Utility Classes\"), mdx(\"p\", null, \"The opposite approach to componentized classes is utility classes. These are small classes that typically do one thing only. For example, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mx-auto\"), \" would apply \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"margin-left: auto; margin-right: auto\"), \".\"), mdx(\"p\", null, \"Bootstrap and Materialize have a set of utility classes, and Tailwind CSS is made up entirely of utility classes if you\\u2019d like more examples.\"), mdx(\"p\", null, \"The power of utility classes is in rapid development. You almost never have to leave your HTML file when prototyping if you have enough utility classes defined.\"), mdx(\"p\", null, \"The con here is that your HTML elements can quickly become bloated with CSS classes, and a combination of ten utility classes used to define a component results in a lot of repeated code.\"), mdx(\"h3\", null, \"Finding Balance\"), mdx(\"p\", null, \"In my experience, a combination of both methods is the sane choice. Having a handful of global utility classes in combination with larger presentational classes for blocks of markup makes the most sense. This has the added benefit of making your markup a little more readable as well, because your component class names like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"card\"), \" are listed beside your layout class names like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"row\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"column\"), \". So \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"card row\"), \" would tell you this card has a row of children elements.\"), mdx(\"p\", null, \"Let\\u2019s look at some examples. Let\\u2019s build a standard layout, starting with a header and some navigation links.\"), mdx(\"p\", null, \"This little bit of CSS is going to let us do a lot of heavy lifting. We\\u2019re going to start with a global color palette using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://codeburst.io/css-variables-explained-with-5-examples-84adaffaa5bd\"\n  }), \"CSS variables\"), \", then define our layout classes.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-css\",\n    \"metastring\": \"css-live\",\n    \"css-live\": true\n  }), \":root {\\n    --ex-black: #1C0F13;\\n    --ex-green-dark: #6E7E85;\\n    --ex-green-light: #B7CECE;\\n    --ex-purple-dark: #BBBAC6;\\n    --ex-purple-light: #E2E2E2\\n}\\n/* These are going to be our main, bread and butter layout classes */\\n.row, .column {\\n    display: flex;\\n    flex-wrap: wrap;\\n}\\n.column {\\n    flex-direction: column;\\n}\\n.container {\\n    max-width: 500px;\\n    margin: auto\\n}\\n/* These additional classes will be used to space/align content */\\n.center-x {\\n    justify-content: center;\\n}\\n.center-y {\\n    align-items: center\\n}\\n.split {\\n    justify-content: space-between\\n}\\n\")), mdx(\"p\", null, \"Next we\\u2019ll add some styles for our navigation header with BEM.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-css\",\n    \"metastring\": \"css-live\",\n    \"css-live\": true\n  }), \" /* add some styles to prettify */\\n.header {\\n    background-color: var(--ex-black);\\n    padding: 10px 5px;\\n}\\n.header__logo {\\n    color: var(--ex-purple-light);\\n    margin: 0;\\n}\\n.header__link {\\n    color: var(--ex-purple-dark);\\n    margin: 0 5px;\\n}\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-html\",\n    \"metastring\": \"html-live\",\n    \"html-live\": true\n  }), \"<header class=\\\"header\\\">\\n    <div class=\\\"container row split center-y\\\">\\n        <h1 class=\\\"header__logo\\\">Logo</h1>\\n        <div class=\\\"row\\\">\\n            <p class=\\\"header__link\\\">Link</p>\\n            <p class=\\\"header__link\\\">Link</p>\\n            <p class=\\\"header__link\\\">Link</p>\\n        </div>\\n    </div>\\n</header>\\n\")), mdx(\"p\", null, \"That made short work of the header!\"), mdx(\"p\", null, \"Let\\u2019s go a little further and build out a jumbotron/call to action and a little text thrown in:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-css\",\n    \"metastring\": \"css-live\",\n    \"css-live\": true\n  }), \".jumbotron__container {\\n    background-color: var(--ex-green-light);\\n}\\n.jumbotron {\\n    height: 300px;\\n    color: var(--ex-black);\\n}\\n.jumbotron__button {\\n    background-color: var(--ex-purple-light);\\n    border: 2px solid var(--ex-green-dark);\\n    border-radius: 4px;\\n    color: var(--ex-green-dark);\\n    transition: background-color 200ms, color 200ms\\n}\\n.jumbotron__button:hover {\\n    color: var(--ex-black);\\n    background-color: var(--ex-purple-dark);\\n    border: 2px solid var(--ex-black);\\n}\\n.ex-heading {\\n    text-align: center;\\n    margin: 24px 0;\\n    color: var(--ex-green-dark);\\n}\\n.ex-text {\\n    color: var(--ex-black);\\n    max-width: 200px;\\n}\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-html\",\n    \"metastring\": \"html-live\",\n    \"html-live\": true\n  }), \"<header class=\\\"header\\\">\\n    <div class=\\\"container row split center-y\\\">\\n        <h1 class=\\\"header__logo\\\">Logo</h1>\\n        <div class=\\\"row\\\">\\n            <p class=\\\"header__link\\\">Link</p>\\n            <p class=\\\"header__link\\\">Link</p>\\n            <p class=\\\"header__link\\\">Link</p>\\n        </div>\\n    </div>\\n</header>\\n<main>\\n    <div class=\\\"jumbotron__container\\\">\\n        <div class=\\\"jumbotron column center-x center-y\\\">\\n            <h2>This is a moving message</h2>\\n            <p>And this is why you should click the button below</p>\\n            <button class=\\\"jumbotron__button\\\">Call to Action</button>\\n        </div>\\n    </div>\\n    <h3 class=\\\"ex-heading\\\">Read Stuff</h3>\\n    <section class=\\\"container row split\\\">\\n        <p class=\\\"ex-text\\\">\\n            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris ultricies sem id ante ullamcorper, a commodo eros molestie. Phasellus leo justo, malesuada scelerisque ullamcorper et, finibus ut metus. Integer egestas tellus leo, et consectetur tortor bibendum at.\\n        </p>\\n        <p class=\\\"ex-text\\\">\\n            Sed non imperdiet risus. Sed at metus mauris. Donec ullamcorper, nunc sit amet ullamcorper mattis, diam sapien viverra nisi, sit amet pretium ligula mi in est. Nulla finibus imperdiet fringilla.\\n        </p>\\n    </section>\\n</main>\\n\")), mdx(\"p\", null, \"Cool right?\"), mdx(\"p\", null, \"Doing something like this as a CSS beginner used to take me hours and many more lines of CSS!\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note\"), \": If you check this layout on mobile, you\\u2019ll see it is responsive without any additional work. The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"flex-wrap\"), \" property makes our children elements wrap to a new line if there\\u2019s not enough space. Flexbox in general works very well with creating responsive layouts.\"), mdx(\"h2\", null, \"Parting Thoughts\"), mdx(\"p\", null, \"Hopefully by now you see the power of applying some organizational principles to your CSS. With a little practice, you can get some amazing things done with only a few lines of code.\"));\n}\nMDXContent.isMDXComponent = true;"},"next":{"id":"2662e070-a75d-5dcf-bce5-ba243858b636","fields":{"slug":"/a-guide-to-usestate-and-usereducer/"},"frontmatter":{"title":"Bridging the Gap between React's useState, useReducer, and Redux"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Bridging the Gap between React's useState, useReducer, and Redux\",\n  \"date\": \"2019-09-12T12:00:00-0400\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"590px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/blog/static/ba29f3c8bad89c521880863a2ddfe9a2/c35de/mindthegap.jpg\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": [\"noopener\"]\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"66.66666666666666%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0px\",\n      \"left\": \"0px\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Photo of a man carelessly leaping over a very deep chasm by Alex Radelich\",\n    \"title\": \"Photo of a man carelessly leaping over a very deep chasm by Alex Radelich\",\n    \"src\": \"/blog/static/ba29f3c8bad89c521880863a2ddfe9a2/c739e/mindthegap.jpg\",\n    \"srcSet\": [\"/blog/static/ba29f3c8bad89c521880863a2ddfe9a2/8ee9c/mindthegap.jpg 148w\", \"/blog/static/ba29f3c8bad89c521880863a2ddfe9a2/ebbe7/mindthegap.jpg 295w\", \"/blog/static/ba29f3c8bad89c521880863a2ddfe9a2/c739e/mindthegap.jpg 590w\", \"/blog/static/ba29f3c8bad89c521880863a2ddfe9a2/5413e/mindthegap.jpg 885w\", \"/blog/static/ba29f3c8bad89c521880863a2ddfe9a2/4efde/mindthegap.jpg 1180w\", \"/blog/static/ba29f3c8bad89c521880863a2ddfe9a2/c35de/mindthegap.jpg 1200w\"],\n    \"sizes\": \"(max-width: 590px) 100vw, 590px\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Redux is one of those technologies that I consider a \\u201Cpersonal Everest\\u201D. Everytime I look at it, I feel like there\\u2019s no end to the boilerplate and patterns to memorize.\"), mdx(\"p\", null, \"At my first job and the first codebase I worked on, we had to use NGRX (Angular\\u2019s version of Redux). It was incredibly challenging; I spent hours reading docs and watching tutorials trying to understand NGRX. I even tried learning Redux in a desperate attempt to understand NGRX. I constantly complained to my boss about all the boilerplate, files, and patterns to memorize.\"), mdx(\"p\", null, \"He told me, \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\u201CIf you were to use your own solution instead, you\\u2019d probably end up repeating those same patterns anyway\\u201D.\")), mdx(\"p\", null, \"I finally concede. After managing React state with everything \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"except\"), \" Redux, I\\u2019ve found myself appreciating why it works the way it does and requires so much boilerplate. After learning React\\u2019s Context API, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useReducer\"), \" and a lot more about managing state, I finally appreciate Redux.\"), mdx(\"p\", null, \"It\\u2019s not easy getting from A to B though. There\\u2019s a lot of ground to cover between learning \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useState\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useReducer\"), \", and even more when you get into Redux and managing complicated states.\"), mdx(\"h2\", null, \"The \\u2018useState\\u2019 Hook\"), mdx(\"p\", null, \"React\\u2019s \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useState\"), \" is a pleasure to use. Give it an initial value, and it gives you a reference to the reactive value and a setter function to update that value.\"), mdx(\"p\", null, \"Here\\u2019s the classic counter example with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useState\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live\",\n    \"react-live\": true\n  }), \"function Counter() {\\n    const [count, setCount] = React.useState(0)\\n    return (\\n        <div>\\n            <p>Count: {count}</p>\\n            <button onClick={() => setCount(count + 1)}>\\n                Increment\\n            </button>\\n        </div>\\n    )\\n}\\n\")), mdx(\"p\", null, \"Simple enough! There\\u2019s only two quirks:\"), mdx(\"p\", null, \"The first is that you must provide a new state value to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setCount\"), \" function (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setCount(count++)\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"count++\"), \" won\\u2019t work). React is steeped in immutability, meaning you should always return a new value instead of changing the current value.\"), mdx(\"p\", null, \"The other quirk is the returned array, but almost all hooks follow this pattern. It\\u2019s a small price to pay considering how easy it is to write functional hook components compared to class components.\"), mdx(\"p\", null, \"So while \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useState\"), \" seems simple enough, what happens when you need more than a single state value? What if you have a form with multiple fields?\"), mdx(\"p\", null, \"Luckily, with hooks we can use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useState\"), \" multiple times:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live use-render\",\n    \"react-live\": true,\n    \"use-render\": true\n  }), \"function FormExample() {\\n  const [email, setEmail] = React.useState('')\\n  const [name, setName] = React.useState('')\\n\\n  const columnStyle = {\\n    display: 'flex',\\n    flexDirection: 'column',\\n  }\\n  return (\\n    <form style={{ ...columnStyle, width: '300px' }}>\\n      <label style={columnStyle}>\\n        <span>Name:</span>\\n        <input\\n          onChange={e => setName(e.target.value)}\\n          value={name}\\n          type=\\\"text\\\"\\n        />\\n      </label>\\n      <label style={columnStyle}>\\n        <span>Email:</span>\\n        <input\\n          onChange={e => setEmail(e.target.value)}\\n          value={email}\\n          type=\\\"text\\\"\\n        />\\n      </label>\\n      <pre>{JSON.stringify({name, email}, null, 2)}</pre>\\n    </form>\\n  )\\n}\\nrender(FormExample)\\n\")), mdx(\"p\", null, \"Great! But how much is too much with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useState\"), \"? Is there a sensible limit? Should we keep it to 5 or less?\"), mdx(\"p\", null, \"And what if you need to manage more complicated data structures or perform side effects?\"), mdx(\"h2\", null, \"The \\u2018useReducer\\u2019 Hook\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"590px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/blog/static/1a1acb148e3f2c1505bb60e360fc0d10/c35de/cooking.jpg\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": [\"noopener\"]\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"66.66666666666666%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0px\",\n      \"left\": \"0px\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Photo of a man stirring a campfire cooking pot by Gary Sandoz\",\n    \"title\": \"Photo of a man stirring a campfire cooking pot by Gary Sandoz\",\n    \"src\": \"/blog/static/1a1acb148e3f2c1505bb60e360fc0d10/c739e/cooking.jpg\",\n    \"srcSet\": [\"/blog/static/1a1acb148e3f2c1505bb60e360fc0d10/8ee9c/cooking.jpg 148w\", \"/blog/static/1a1acb148e3f2c1505bb60e360fc0d10/ebbe7/cooking.jpg 295w\", \"/blog/static/1a1acb148e3f2c1505bb60e360fc0d10/c739e/cooking.jpg 590w\", \"/blog/static/1a1acb148e3f2c1505bb60e360fc0d10/5413e/cooking.jpg 885w\", \"/blog/static/1a1acb148e3f2c1505bb60e360fc0d10/4efde/cooking.jpg 1180w\", \"/blog/static/1a1acb148e3f2c1505bb60e360fc0d10/c35de/cooking.jpg 1200w\"],\n    \"sizes\": \"(max-width: 590px) 100vw, 590px\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Now we\\u2019ve entered \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useReducer\"), \" territory. The reducer in \\u2018useReducer\\u2019 comes from Redux, which in turn borrowed it from JavaScript\\u2019s \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Array.reduce()\"), \".\"), mdx(\"p\", null, \"So what does it mean to \\u201Creduce\\u201D something? Think of simmering balsamic vinegar so the vinegar evaporates and you\\u2019re left with a sweet, delicious glaze. That\\u2019s called a \\u201Cbalsamic reduction\\u201D. Think of reducers as taking arguments and cooking them down until they\\u2019re more pallatable.\"), mdx(\"p\", null, \"In the context of React, here\\u2019s the typical pattern used with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useReducer\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const reducer = function (currentState, action) {\\n  // Make a new state based on the current state and action\\n  // Note: There's usually a big switch statement here\\n  return newState\\n}\\nconst [state, dispatch] = useReducer(reducer, initialValue)\\n\\n// example usage:\\ndispatch({type: \\\"THING_HAPPENED\\\"})\\n// Or with an optional \\\"payload\\\":\\ndispatch({type: \\\"THING_HAPPENED\\\", payload: newData})\\n\")), mdx(\"p\", null, \"Before we dig into the classic reducer pattern, I want to boil \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useReducer\"), \" down to its basic functionality. Simply put: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useReducer\"), \" is almost identical to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useState\"), \", except \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useReducer\"), \" lets you define exactly how to update it\\u2019s state value by passing it a function.\"), mdx(\"p\", null, \"Let\\u2019s look at our counter example from before. Here we\\u2019ll implement our own \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useState\"), \" with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useReducer\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live\",\n    \"react-live\": true\n  }), \"function Counter() {\\n    const [count, setCount] = React.useReducer((currentCount, newCount) => newCount, 0)\\n    return (\\n        <div>\\n            <p>Count: {count}</p>\\n            <button onClick={() => setCount(count + 1)}>\\n                Increment\\n            </button>\\n        </div>\\n    )\\n}\\n\")), mdx(\"p\", null, \"This is extra work with no benefit, though. Why pass a function to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useReducer\"), \", only to pass another to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"onClick\"), \"? Also, our counter logic is living in our JSX button element, which isn\\u2019t great.\"), mdx(\"p\", null, \"Let\\u2019s cut out the extra function and move our logic out of the JSX:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live\",\n    \"react-live\": true\n  }), \"function Counter() {\\n    const [count, increment] = React.useReducer(currentCount => currentCount + 1, 0)\\n    return (\\n        <div>\\n            <p>Count: {count}</p>\\n            <button onClick={increment}>\\n                Increment\\n            </button>\\n        </div>\\n    )\\n}\\n\")), mdx(\"p\", null, \"If you take nothing else away from this article, remember this:\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"The power of \", mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"useReducer\"), \" is that it allows us to define how we update our state value.\")), mdx(\"p\", null, \"That said, before we dive further into reducers and patterns, I want to take a minute to define \\u201Cstate\\u201D.\"), mdx(\"h2\", null, \"The Problem with \\u201CState\\u201D in React\"), mdx(\"p\", null, \"There are some major misconceptions about \\u201Cstate\\u201D in React. I think when Vue named it\\u2019s version of state \\u201Cdata\\u201D, they made it easier to think about Vue code.\"), mdx(\"p\", null, \"What React defines as state is really just data that we would normally store in variables. However, React needs to, well, \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"react\"), \" to changes in that data. So under the hood, when you store things in state, React attaches methods and properties to that object so it knows when to trigger re-renders.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"React \\u201Cstate\\u201D is just an object that React watches for updates.\")), mdx(\"p\", null, \"So if React\\u2019s \\u201Cstate\\u201D isn\\u2019t really state, what is? The concept of \\u201Cstate\\u201D actually pre-dates React by \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://en.wikipedia.org/wiki/State_(computer_science)\"\n  }), \"decades\"), \". In computer science terms, \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"the state of an application describes its current status and the previous events and user interactions that resulted in that status.\")), mdx(\"p\", null, \"This type of state is notoriously difficult to deal with in programming. This is why every technical support agent defaults to \\u201Cturn it off and on again\\u201D when you call for help. Your device entered a bad state somehow, and sometimes the easiest way to get out of a bad state is to reboot the system into a new state.\"), mdx(\"p\", null, \"When we write React code, the problem is that we have a tendency to conflate the state of the program with the data React is watching for renders. For example, you might have data in your component that describes what the user typed in an input field, but also data that tells you if the form is valid or not. The combination of that current data and how it changed in response to the user is the actual state of your component.\"), mdx(\"p\", null, \"We typically only worry about storing and updating data in our components, and avoid thinking about it\\u2019s actual state until we start to find bugs.\"), mdx(\"h2\", null, \"Reducers and Redux\"), mdx(\"p\", null, \"The reducer pattern is an attempt to tame the flow of updating complex state. While not foolproof or easy, it can help us define and manages state changes in our application and components.\"), mdx(\"p\", null, \"Let\\u2019s look at a simple version of the reducer pattern in the context of a form:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const reducer = function (currentState, action) {\\n    switch(action.type) {\\n        case 'NAME_CHANGED':\\n            return {...currentState, name: action.payload}\\n        case 'EMAIL_CHANGED':\\n            return {...currentState, email: action.payload}\\n        default:\\n            return state\\n    }\\n}\\nconst [state, dispatch] = useReducer(reducer, {name: '', email:''})\\n\\n// example usage:\\ndispatch({type: 'NAME_CHANGED'})\\n// or with a payload:\\ndispatch({type: 'NAME_CHANGED', payload: 'Suzy'})\\n\")), mdx(\"p\", null, \"Think about this as an event signaling system. When we call \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dispatch\"), \", we pass in an object that tells us what happened, and then our reducer takes that information and processes it to create a new state.\"), mdx(\"p\", null, \"So why call it dispatch and action? Why the switch statement?\"), mdx(\"h3\", null, \"Dispatchers\"), mdx(\"p\", null, \"I like to picture \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dispatch\"), \" as a dispatcher of an old switchboard telephone system. The dispatcher packages the info with the main message (type) and any additional info (payload) and plugs it into the switchboard, our reducer (which coincidentally contains a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"switch\"), \").\"), mdx(\"h3\", null, \"Actions\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://medium.com/magnetis-backstage/why-action-is-a-bad-name-for-a-redux-action-68bec375539e\"\n  }), \"They really should have called them \\u201Cevents\\u201D instead of \\u201Cactions\\u201D.\"), \" Actions describe events that have happened in your application. So when naming action types, it\\u2019s better to use the past tense ie \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"NAME_CHANGED\\\"\"), \", than the present, ie \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"CHANGE_NAME\\\"\"), \".\"), mdx(\"p\", null, \"While this may seem like irrelevant semantics, it makes a big difference in understanding the redux pattern. It\\u2019s important to remember that your reducer is responding to events to decide on a new state. When you say \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"CHANGE_NAME\\\"\"), \", you\\u2019re implying that your reducer \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"will\"), \" change the name, as opposed to letting it decide \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"if\"), \" it will change it.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note:\"), \" While I would much rather refer to these as events, we\\u2019ll stick with \\u201Caction\\u201D for sake of convention. Just remember to use the past tense in your action types.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Another Note:\"), \" We also use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://en.wikipedia.org/wiki/Snake_case\"\n  }), \"SCREAMING_SNAKE_CASE\"), \" for our action types. This is to denote that the strings are a constant value and to also implore you not to mutate or change them. (\\u201CScreaming Snake Case\\u201D is an excellent name for a metal band, btw.)\"), mdx(\"h3\", null, \"The Switch Statement\"), mdx(\"p\", null, \"The choice of a switch statement over a long \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"if\"), \"/\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"else if\"), \" chain is mainly about readability.\"), mdx(\"p\", null, \"You may also notice that there\\u2019s no \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"break\"), \" statements and lots of spread operators in our switch statement. We\\u2019re using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"return\"), \" in lieu of break, which prevents the switch waterfall effect (more on that later). As for the spread operators, remember that React is built on immutability, so the creation of new objects is necessary. By spreading first and passing in our changes second, we can overwrite only the properties in state that we need to without affecting the rest:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\",\n    \"metastring\": \"js-live autorun\",\n    \"js-live\": true,\n    \"autorun\": true\n  }), \"const state = {\\n  name: \\\"Robert\\\",\\n  email: \\\"SuperBobby74@aol.com\\\"\\n}\\nconst newState = {...state, name: \\\"Bobby\\\"}\\nconsole.log(newState)\\n\")), mdx(\"p\", null, \"Let\\u2019s apply the reducer pattern and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useReducer\"), \" to our form from earlier:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live use-render\",\n    \"react-live\": true,\n    \"use-render\": true\n  }), \"function FormExample() {\\n  function formReducer(state, action) {\\n    switch (action.type) {\\n      case 'NAME_CHANGED':\\n        return { ...state, name: action.payload }\\n      case 'EMAIL_CHANGED':\\n        return { ...state, email: action.payload }\\n      default:\\n        return state\\n    }\\n  }\\n\\n  const [state, dispatch] = React.useReducer(formReducer, {\\n    name: '',\\n    email: '',\\n  })\\n\\n  const columnStyle = {\\n    display: 'flex',\\n    flexDirection: 'column',\\n  }\\n\\n  return (\\n    <form style={{ ...columnStyle, width: '300px' }}>\\n      <label style={columnStyle}>\\n        <span>Name:</span>\\n        <input\\n          onChange={e =>\\n            dispatch({ type: 'NAME_CHANGED', payload: e.target.value })\\n          }\\n          value={state.name}\\n          type=\\\"text\\\"\\n        />\\n      </label>\\n      <label style={columnStyle}>\\n        <span>Email:</span>\\n        <input\\n          onChange={e =>\\n            dispatch({ type: 'EMAIL_CHANGED', payload: e.target.value })\\n          }\\n          value={state.email}\\n          type=\\\"text\\\"\\n        />\\n      </label>\\n      <pre>{JSON.stringify(state, null, 2)}</pre>\\n    </form>\\n  )\\n}\\n\\nrender(FormExample)\\n\")), mdx(\"p\", null, \"This works great, but we can make some improvements.\"), mdx(\"p\", null, \"First let\\u2019s pull our action types out and make them into an object like this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const actions = {\\n  nameChanged: 'NAME_CHANGED',\\n  emailChanged: 'EMAIL_CHANGED',\\n}\\n\")), mdx(\"p\", null, \"This will save you from errors down the line. If you use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"actions.nameChanged\"), \" in your switch and dispatch, your IDE may help prevent errors from typos in your action types. (You might see this same pattern with enums if the codebase is using TypeScript.)\"), mdx(\"p\", null, \"We can also pull out our initial state into it\\u2019s own object, and move it outside of our component along with our reducer and our actions.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live use-render\",\n    \"react-live\": true,\n    \"use-render\": true\n  }), \"const actions = {\\n  nameChanged: 'NAME_CHANGED',\\n  emailChanged: 'EMAIL_CHANGED',\\n}\\n\\nconst initialState = {\\n  name: '',\\n  email: '',\\n}\\n\\nfunction formReducer(state, action) {\\n  switch (action.type) {\\n    case actions.nameChanged:\\n      return { ...state, name: action.payload }\\n    case actions.emailChanged:\\n      return { ...state, email: action.payload }\\n    default:\\n      return state\\n  }\\n}\\n\\nfunction FormExample() {\\n  const [state, dispatch] = React.useReducer(formReducer, initialState)\\n\\n  const columnStyle = {\\n    display: 'flex',\\n    flexDirection: 'column',\\n  }\\n  return (\\n    <form style={{ ...columnStyle, width: '300px' }}>\\n      <label style={columnStyle}>\\n        <span>Name:</span>\\n        <input\\n          onChange={e =>\\n            dispatch({ type: actions.nameChanged, payload: e.target.value })\\n          }\\n          value={state.name}\\n          type=\\\"text\\\"\\n        />\\n      </label>\\n      <label style={columnStyle}>\\n        <span>Email:</span>\\n        <input\\n          onChange={e =>\\n            dispatch({ type: actions.emailChanged, payload: e.target.value })\\n          }\\n          value={state.email}\\n          type=\\\"text\\\"\\n        />\\n      </label>\\n      <pre>{JSON.stringify(state, null, 2)}</pre>\\n    </form>\\n  )\\n}\\nrender(FormExample)\\n\")), mdx(\"h3\", null, \"Handling Business Logic using Reducers\"), mdx(\"p\", null, \"You might be wondering why exactly we\\u2019ve taken our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useState\"), \" example and made it so complicated. It seems like all we\\u2019ve done is add code to duplicate the same functionality we had before.\"), mdx(\"p\", null, \"Reducers really start to shine when we add a submit button to the form. Forms are devilishly complex things to reason about (lots of state to manage), which is why there are so many form libraries out there. You need to account for validation, plus keep track of what fields are filled out, what happens when the form is submitted, etc.\"), mdx(\"p\", null, \"If you were going to manage that logic with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useState\"), \", you\\u2019d find yourself wrapping your submit in a lot of code, adding more \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useState\"), \" hooks, and possibly wrapping your setter functions in validation functions that might update \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"other\"), \" state values. This would get messy quickly.\"), mdx(\"p\", null, \"Unlike \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useState\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useReducer\"), \" provides a great infrastructure to handle all of the logic that surrounds validation and submission:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live use-render\",\n    \"react-live\": true,\n    \"use-render\": true\n  }), \"const actions = {\\n  nameChanged: 'NAME_CHANGED',\\n  emailChanged: 'EMAIL_CHANGED',\\n  formSubmitted: 'FORM_SUBMITTED',\\n}\\n\\nconst initialState = {\\n  name: '',\\n  email: '',\\n  nameError: null,\\n  emailError: null,\\n  formCompleted: false,\\n  formSubmitted: false,\\n}\\n\\nfunction formReducer(state, action) {\\n  let error\\n  switch (action.type) {\\n    case actions.nameChanged:\\n      error = validate('name', action.payload)\\n      return { ...state, name: action.payload, nameError: error }\\n    case actions.emailChanged:\\n      error = validate('email', action.payload)\\n      return { ...state, email: action.payload, emailError: error }\\n    case actions.formSubmitted:\\n      // if the form has been successfully submitted,\\n      // stop here to prevent rage clicks and re-submissions\\n      if (state.formCompleted) return state\\n      let formValid = true\\n      // invalidate the form if values are missing or in error\\n      if (state.nameError || !state.name || state.emailError || !state.email) {\\n        formValid = false\\n      }\\n      // if the user has attempted to submit before, stop here\\n      if (state.formSubmitted) return { ...state, formCompleted: formValid }\\n      // if this is the first submit, we need to validate in case the user\\n      // clicked submit without typing anything\\n      let nameError = validate('name', state.name)\\n      let emailError = validate('email', state.email)\\n      return {\\n        ...state,\\n        nameError,\\n        emailError,\\n        formSubmitted: true,\\n        formCompleted: formValid,\\n      }\\n    default:\\n      return state\\n  }\\n}\\n\\n// this helper function validates the name and email inputs\\n// if there's an error, it returns an error message describing the problem\\n// if there are no errors, it returns null\\n// it's outside our reducer to make things more readable and DRY\\nfunction validate(name, value) {\\n  if (typeof value === 'string') value = value.trim()\\n  switch (name) {\\n    case 'name':\\n      if (value.length === 0) {\\n        return 'Must enter name'\\n      } else if (value.split(' ').length < 2) {\\n        return 'Must enter first and last name'\\n      } else {\\n        return null\\n      }\\n      break\\n    case 'email':\\n      if (value.length === 0) {\\n        return 'Must enter email'\\n      } else if (\\n        !value.includes('@') ||\\n        !value.includes('.') ||\\n        value.split('.')[1].length < 2\\n      ) {\\n        return 'Must enter valid email'\\n      } else {\\n        return null\\n      }\\n      break\\n  }\\n}\\n\\nfunction FormExample() {\\n  const [state, dispatch] = React.useReducer(formReducer, initialState)\\n\\n  // extract our dispatch to a change handler to DRY the code up\\n  function handleChange(e) {\\n    dispatch({ type: actions[e.target.name + 'Changed'], payload: e.target.value })\\n  }\\n\\n  // this is attached to the form, not the submit button so that\\n  // the user can click OR press 'enter' to submit\\n  // we don't need a payload, the input values are already in state\\n  function handleSubmit(e) {\\n    e.preventDefault()\\n    dispatch({ type: actions.formSubmitted })\\n  }\\n\\n  const columnStyle = {\\n    display: 'flex',\\n    flexDirection: 'column',\\n  }\\n  // this adds a red outline to the input if the field isn't filled out correctly,\\n  // but only if the user has attempted to submit\\n  const inputStyle = hasError => {\\n    return {\\n      outline: hasError && state.formSubmitted ? '2px solid red' : 'none',\\n    }\\n  }\\n  return (\\n    <form style={{ ...columnStyle, width: '300px' }} onSubmit={handleSubmit}>\\n      <label style={columnStyle}>\\n        <span>Name:</span>\\n        <input\\n          style={inputStyle(state.nameError)}\\n          onChange={handleChange}\\n          name=\\\"name\\\"\\n          value={state.name}\\n          type=\\\"text\\\"\\n        />\\n        <span>{state.formSubmitted && state.nameError}</span>\\n      </label>\\n      <label style={columnStyle}>\\n        <span>email:</span>\\n        <input\\n          style={inputStyle(state.emailError)}\\n          onChange={handleChange}\\n          name=\\\"email\\\"\\n          value={state.email}\\n          type=\\\"text\\\"\\n        />\\n        <span>{state.formSubmitted && state.emailError}</span>\\n      </label>\\n      <p>{state.formCompleted && 'Form Submitted Successfully!'}</p>\\n      <button type=\\\"submit\\\">Submit</button>\\n      <pre>{JSON.stringify(state, null, 2)}</pre>\\n    </form>\\n  )\\n}\\n\\nrender(FormExample)\\n\")), mdx(\"p\", null, \"Notice how our reducer function swelled with business logic. That\\u2019s OK! In fact, it\\u2019s a good rule of thumb to keep your reducers fat and event handlers skinny.\"), mdx(\"p\", null, \"The functionality has changed as well. As our values change, the reducer handles validation and adds error messages to our state if necessary. If the form hasn\\u2019t been submitted, we can hold off on annoying the user with red boxes and error messages until they submit. If errors are present on submission, we can change the messages as they type to guide them to enter the correct information. Lastly, we can prevent rage clicks and repeat submissions with a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"formCompleted\"), \" flag in our submission case.\"), mdx(\"p\", null, \"This provides a great experience for the user, and a good organizational model for all these complex UI interactions.\"), mdx(\"h2\", null, \"Welcome to Redux\"), mdx(\"p\", null, \"Believe it or not, \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"We\\u2019ve now implemented all the major components of Redux\"), \". Redux itself is really just a helper library to assist in doing the same things we\\u2019ve done in this article.\"), mdx(\"p\", null, \"In a typical Redux application, we lift the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"actions\"), \", \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"reducers\"), \", and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"state\"), \" into their own files in the project. To manage multiple state objects, we can group sets of actions/reducers/state into different \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"stores\"), \" that then become part of a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"global store\"), \" with a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"root reducer\"), \". The root reducer\\u2019s job is to compose the state of each store into a single, global state object.\"), mdx(\"p\", null, \"Then we import whatever store, dispatcher, and actions we need into our components to access state and signal events to the global store. Redux provides some utility to assist in composing this global state management system, but for the most part, you\\u2019re going to write all the actions, reducers, and states yourself, just like we did in this article.\"), mdx(\"p\", null, \"So if you made it this far, you\\u2019re ready to use Redux! The real question is, should you?\"), mdx(\"h3\", null, \"Is Redux Dead \\u2620?\"), mdx(\"p\", null, \"You can certainly do a lot without Redux nowadays with the Context API and the information learned here. Think of a Context as a Redux Store that you can position anywhere in your app. Any components that are wrapped in a Context Provider get access to the values you share from it. Context can be at the top level in your application, providing state to everything, or further down and only sharing its state with a handful of components.\"), mdx(\"p\", null, \"Kent C Dodds has an \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"excellent\"), \" \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kentcdodds.com/blog/application-state-management-with-react\"\n  }), \"article\"), \" on using Context for state management in React.\"), mdx(\"p\", null, \"That said, \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Redux is not dead\"), \". There are plenty of codebases out there using it, and if you\\u2019re going to write React professionally, it\\u2019s not a bad idea to learn it.\"), mdx(\"h2\", null, \"Beyond Redux \\uD83D\\uDE35\"), mdx(\"p\", null, \"We\\u2019re going to get into some slightly advanced topics now, so buckle up.\"), mdx(\"p\", null, \"The most astute tester might have noticed the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"bug in the last example.\"), \" Scroll up and see if you can\\u2019t find the edge case we missed.\"), mdx(\"p\", null, \"Give up?\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"You can edit the form after a successful submit!\")), mdx(\"p\", null, \"How can we fix this? Your first instinct might be to start sprinkling the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"formSubmitted\"), \" flag throughout our reducer to prevent further changes to the form, sort of how we did at the beginning of our submit case.\"), mdx(\"p\", null, \"This would work, but it\\u2019s hard to read and reason about. I\\u2019d argue that the submission case is already a bit of a mess, and adding more logic to the other cases is only going to make things worse.\"), mdx(\"p\", null, \"More importantly, how did we miss this in the first place? We learned all of this complicated JavaScript to prevent bugs, but we found some anyway!\"), mdx(\"h2\", null, \"Implicit vs Explicit States\"), mdx(\"p\", null, \"In my tangent on state, I mentioned that we sometimes end up describing state with booleans or flags in our code. We\\u2019ve done that in our form with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"formCompleted\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"formSubmitted\"), \". The problem is that we\\u2019ve implicitly described the state of our form instead of explicitly.\"), mdx(\"p\", null, \"That means that we\\u2019re relying on some combination of those booleans to describe the state of our form. For example, if the user hasn\\u2019t entered anything and hasn\\u2019t pressed submit, we might write:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"if (!formSubmitted && !name && !email && !emailError && !nameError) {\\n  // behave as if user hasn't done anything yet\\n}\\n\")), mdx(\"p\", null, \"This is messy and hard to understand. When you come back to this code later you might even forget how it works and be hesitant to change it. It\\u2019s much better to explicitly describe the state of the form, and then ensure that the form can only exist in one of those states at any point in time.\"), mdx(\"p\", null, \"We could describe our form states as:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Clean\"), \" - User hasn\\u2019t entered anything or pressed submit\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Dirty\"), \" - User has started to enter info, but hasn\\u2019t successfully finished and submitted\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Completed\"), \" - Form has been filled out correctly and submitted\")), mdx(\"p\", null, \"We also want to handle the transitions between these states as well as the possible actions that can happen in each state:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Clean\"), \" - User hasn\\u2019t entered anything or pressed submit\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Possible Transitions: Dirty\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Allowed Actions: editing and submitting, but submitting does not trigger errors, just a message\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Dirty\"), \" - User has started to enter info, but hasn\\u2019t successfully finished and submitted\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Possible Transitions: Completed\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Allowed Actions: editing and submitting, but submitting triggers error messages\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Completed\"), \" - Form has been filled out correctly and submitted\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Possible Transitions: None!\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Allowed Actions: None!\")))), mdx(\"h2\", null, \"Finite State Machines\"), mdx(\"p\", null, \"The mental model we just created is a state machine or finite state machine (FSM). \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Finite\"), \" meaning there\\u2019s a limited amount of states that the form can exist in, \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"state\"), \" describing the status of the form, and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"machine\"), \" referring to the mechanism of how we transition to and from different states.\"), mdx(\"p\", null, \"I\\u2019m not a state machine expert, so I highly recommend reading \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://medium.com/@DavidKPiano/the-facetime-bug-and-the-dangers-of-implicit-state-machines-a5f0f61bdaa2\"\n  }), \"these\"), \" \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://24ways.org/2018/state-machines-in-user-interfaces/\"\n  }), \"articles\"), \" by David Khourshid for a deeper dive into FSMs.\"), mdx(\"p\", null, \"There are two options for applying this model to our code.\"), mdx(\"p\", null, \"First, there\\u2019s library that\\u2019s tailor-made for FSMs called \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://xstate.js.org/docs/\"\n  }), \"XState\"), \", written by the same David mentioned above. Here\\u2019s a great \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gedd.ski/post/state-machines-in-react/\"\n  }), \"tutorial\"), \" by Dave Geddes on using xstate in React if you\\u2019re interested.\"), mdx(\"p\", null, \"The other option is to implement the logic ourselves in our reducer. This is a bit of a tall order, but if you read the FSM articles I linked, you might have seen an example of a FSM implemented with a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"nested switch\"), \" statement. Let\\u2019s apply that to our form.\"), mdx(\"h3\", null, \"Advanced Switch Statements\"), mdx(\"p\", null, \"Before we get to our final example, let\\u2019s briefly review JavaScript\\u2019s \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"switch\"), \".\"), mdx(\"p\", null, \"What we\\u2019re about to use is the \\u201Cfall-through\\u201D or \\u201Cwaterfall\\u201D switch usage. What this means is we will deliberately \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"not\"), \" use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"break\"), \" in every case so that we can match multiple cases.\"), mdx(\"p\", null, \"Let\\u2019s see an example where we ignore Mom\\u2019s advice and skip breakfast, but still eat lunch and dinner:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\",\n    \"metastring\": \"js-live autorun\",\n    \"js-live\": true,\n    \"autorun\": true\n  }), \"const actionType = \\\"LUNCH_ORDERED\\\"\\n\\nswitch(actionType) {\\n  case \\\"BREAKFAST_ORDERED\\\":\\n    console.log(\\\"breakfast\\\")\\n    // no break!\\n  case \\\"LUNCH_ORDERED\\\":\\n    console.log(\\\"lunch\\\")\\n    // no break!\\n  case \\\"DINNER_ORDERED\\\":\\n    console.log(\\\"dinner\\\")\\n    break\\n  default:\\n    console.log(\\\"fasting \\uD83D\\uDE35\\\")\\n}\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Once you match a case, you match all cases until you break or return.\")), mdx(\"p\", null, \"What about nested switches \\uD83D\\uDE35?\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\",\n    \"metastring\": \"js-live autorun\",\n    \"js-live\": true,\n    \"autorun\": true\n  }), \"function dailyLife(status, actionType) {\\n  switch(status) {\\n    case \\\"work\\\":\\n      switch(actionType) {\\n        case \\\"WORK_REQUESTED\\\":\\n          console.log(\\\"DOING WORK\\\")\\n          break\\n      }\\n    //no break after \\\"work\\\"\\n    case \\\"holiday\\\":\\n      switch(actionType) {\\n        case \\\"CAKE_EATEN\\\":\\n          console.log(\\\"FEELING FAT\\\")\\n          break\\n        case \\\"NAP_REQUESTED\\\":\\n          console.log(\\\"NAPPING\\\")\\n          break\\n      }\\n  }\\n}\\nconsole.log(\\\"ooooh, who's birthday is it?\\\")\\ndailyLife(\\\"work\\\", \\\"CAKE_EATEN\\\") // feeling fat\\n\\nconsole.log(\\\"Taking a break, afk\\\")\\ndailyLife(\\\"work\\\", \\\"NAP_REQUESTED\\\") // napping\\n\\nconsole.log(\\\"Hey, I know it's Saturday, but can you get us that TPS report?\\\")\\ndailyLife(\\\"holiday\\\", \\\"WORK_REQUESTED\\\") // not happening, sorry boss\\n\")), mdx(\"p\", null, \"Here we can see that you can take a nap at work and on holiday, but you can\\u2019t work on a holiday. (At least you shouldn\\u2019t).\"), mdx(\"p\", null, \"The idea is that if you have to share actions between states, \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"put the state with unshared actions at the top\"), \". If we can only work at work, then the work status should be at the top. If you can eat cake at work and on holiday, then holidays/cake-eating should be below.\"), mdx(\"p\", null, \"This is definitely an advanced technique, so be careful and test often when you\\u2019re writing a complicated switch that\\u2019s nesting and waterfalling through cases.\"), mdx(\"p\", null, \"In the case of our form, we want the user to be able to edit the form regardless if it\\u2019s \\u201Cclean\\u201D or \\u201Cdirty\\u201D. To share the input change actions, we don\\u2019t \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"break\"), \" between the clean and dirty cases so that those actions are available to both. Also, you can submit in both states, but submit behaves differently in each.\"), mdx(\"p\", null, \"Alright, here we go! Let\\u2019s take a look at our final form example with FSMs and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useReducer\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"react-live use-render\",\n    \"react-live\": true,\n    \"use-render\": true\n  }), \"const actions = {\\n  nameChanged: 'NAME_CHANGED',\\n  emailChanged: 'EMAIL_CHANGED',\\n  formSubmitted: 'FORM_SUBMITTED',\\n}\\n\\nconst initialState = {\\n  name: '',\\n  email: '',\\n  nameError: null,\\n  emailError: null,\\n  submitAttempted: false,\\n  submitMessage: '',\\n  status: 'clean',\\n}\\n\\nfunction formReducer(state, action) {\\n  let error\\n  switch (state.status) {\\n    case 'dirty':\\n      switch (action.type) {\\n        case actions.formSubmitted:\\n          let formValid = true\\n          let nameError = validate('name', state.name)\\n          let emailError = validate('email', state.email)\\n          if (nameError || !state.name || emailError || !state.email) {\\n            formValid = false\\n          }\\n          return {\\n            ...state,\\n            nameError,\\n            emailError,\\n            submitAttempted: true,\\n            status: formValid ? 'completed' : 'dirty',\\n            submitMessage: formValid\\n              ? 'Form Submitted Successfully'\\n              : 'Form Has Errors',\\n          }\\n      }\\n    // no 'break' or 'return', case 'dirty' continues!\\n    case 'clean':\\n      switch (action.type) {\\n        case actions.nameChanged:\\n          error = validate('name', action.payload)\\n          return {\\n            ...state,\\n            name: action.payload,\\n            nameError: error,\\n            submitMessage: '',\\n            status: 'dirty',\\n          }\\n        case actions.emailChanged:\\n          error = validate('email', action.payload)\\n          return {\\n            ...state,\\n            email: action.payload,\\n            emailError: error,\\n            submitMessage: '',\\n            status: 'dirty',\\n          }\\n        case actions.formSubmitted:\\n          return {\\n            ...state,\\n            submitMessage: 'Please fill out the form',\\n          }\\n        default:\\n          return state\\n      }\\n    case 'completed':\\n    // no 'break' or 'return', case 'completed' continues!\\n    default:\\n      return state\\n  }\\n}\\n\\nfunction validate(name, value) {\\n  if (typeof value === 'string') value = value.trim()\\n  switch (name) {\\n    case 'name':\\n      if (value.length === 0) {\\n        return 'Must enter name'\\n      } else if (value.split(' ').length < 2) {\\n        return 'Must enter first and last name'\\n      } else {\\n        return null\\n      }\\n      break\\n    case 'email':\\n      if (value.length === 0) {\\n        return 'Must enter email'\\n      } else if (\\n        !value.includes('@') ||\\n        !value.includes('.') ||\\n        value.split('.')[1].length < 2\\n      ) {\\n        return 'Must enter valid email'\\n      } else {\\n        return null\\n      }\\n      break\\n  }\\n}\\n\\nfunction FormExample() {\\n  const [state, dispatch] = React.useReducer(formReducer, initialState)\\n\\n  function handleChange({ target: { name, value } }) {\\n    dispatch({ type: actions[name + 'Changed'], payload: value })\\n  }\\n\\n  function handleSubmit(e) {\\n    e.preventDefault()\\n    dispatch({ type: actions.formSubmitted })\\n  }\\n\\n  const columnStyle = {\\n    display: 'flex',\\n    flexDirection: 'column',\\n  }\\n  const inputStyle = hasError => {\\n    return {\\n      outline: hasError && state.submitAttempted ? '2px solid red' : 'none',\\n    }\\n  }\\n  return (\\n    <form style={{ ...columnStyle, width: '300px' }} onSubmit={handleSubmit}>\\n      <label style={columnStyle}>\\n        <span>Name:</span>\\n        <input\\n          style={inputStyle(state.nameError)}\\n          onChange={handleChange}\\n          name=\\\"name\\\"\\n          value={state.name}\\n          type=\\\"text\\\"\\n        />\\n        <span>{state.submitAttempted && state.nameError}</span>\\n      </label>\\n      <label style={columnStyle}>\\n        <span>email:</span>\\n        <input\\n          style={inputStyle(state.emailError)}\\n          onChange={handleChange}\\n          name=\\\"email\\\"\\n          value={state.email}\\n          type=\\\"text\\\"\\n        />\\n        <span>{state.submitAttempted && state.emailError}</span>\\n      </label>\\n      <p>{state.submitMessage}</p>\\n      <button type=\\\"submit\\\">Submit</button>\\n      <pre>{JSON.stringify(state, null, 2)}</pre>\\n    </form>\\n  )\\n}\\n\\nrender(FormExample)\\n\")), mdx(\"p\", null, \"Now our form is bug free!\"), mdx(\"p\", null, \"We\\u2019ve explicitly modeled and accounted for all the possible states it can exist in, and defined the possible actions in those states.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note:\"), \" You may notice we still have a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"submitAttempted\"), \" boolean in the code. This is OK because it is only used to show or hide the error messages in our form. Most importantly, \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"We don\\u2019t check \", mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"submitAttempted\"), \" to determine what state we\\u2019re in.\")), mdx(\"h2\", null, \"Parting Thoughts\"), mdx(\"p\", null, \"This post is full of advanced concepts and I hope that you were able to learn some of them even if you didn\\u2019t make it all the way to the end. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Don\\u2019t fret if you didn\\u2019t understand every concept and example.\"), \" Start at the easy stuff, and start applying and practicing those concepts first in your own code before moving on to the more difficult concepts. That\\u2019s how I learned them.\"), mdx(\"p\", null, \"Thanks for reading this huge article, cheers!\"));\n}\nMDXContent.isMDXComponent = true;"}}}}